<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vamos aprender a Hora!</title>
    <link href="https://fonts.googleapis.com/css2?family=Fredoka:wght@400;600;700&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    <style>
        :root {
            --hour-color: #2563eb; /* Azul */
            --min-color: #db2777;  /* Rosa */
            --primary: #6366f1;
            --success: #22c55e;
            --bg: #f8fafc;
        }

        body {
            font-family: 'Fredoka', sans-serif;
            background-color: var(--bg);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            margin: 0;
            user-select: none;
        }

        .container {
            background: white;
            padding: 1.5rem;
            border-radius: 40px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            text-align: center;
            width: 350px;
            border: 4px solid transparent;
        }

        h1 { color: var(--primary); margin: 0 0 10px 0; font-size: 1.6rem; }

        /* Legenda Colorida */
        .info-bar {
            background: #f1f5f9;
            padding: 10px;
            border-radius: 15px;
            margin-bottom: 15px;
            display: flex;
            flex-direction: column;
            gap: 5px;
            font-size: 0.9rem;
            font-weight: 600;
        }
        .info-h { color: var(--hour-color); }
        .info-m { color: var(--min-color); }

        .target-box {
            background: #fdf2f8;
            border-radius: 20px;
            padding: 10px;
            margin-bottom: 20px;
        }
        .target-label { font-size: 0.9rem; color: #64748b; font-weight: 600; }
        .target-time { font-size: 2.5rem; font-weight: 700; color: var(--primary); }

        .clock {
            width: 260px; height: 260px;
            border-radius: 50%;
            background: #fff;
            border: 10px solid #e2e8f0;
            position: relative;
            margin: 0 auto;
            touch-action: none;
        }

        .number {
            position: absolute; width: 30px; height: 30px;
            display: flex; align-items: center; justify-content: center;
            font-weight: 700; font-size: 1.3rem; color: #1e293b;
        }

        .min-help {
            position: absolute; font-size: 0.8rem; color: var(--min-color);
            font-weight: 700; opacity: 0; transition: 0.3s;
        }
        .show-help .min-help { opacity: 1; }

        .hand {
            position: absolute; bottom: 50%; left: 50%;
            transform-origin: bottom center; border-radius: 10px;
            cursor: pointer;
        }
        /* Ponteiro Pequeno Azul */
        .hour-hand { width: 10px; height: 65px; background: var(--hour-color); z-index: 3; }
        /* Ponteiro Grande Rosa */
        .min-hand { width: 6px; height: 95px; background: var(--min-color); z-index: 2; }

        .center {
            position: absolute; top: 50%; left: 50%; width: 16px; height: 16px;
            background: #334155; border-radius: 50%; transform: translate(-50%, -50%);
            z-index: 10; border: 2px solid white;
        }

        .controls { margin-top: 20px; display: flex; flex-direction: column; gap: 10px; }

        button {
            border: none; border-radius: 15px; font-weight: 700; cursor: pointer;
            font-family: 'Fredoka', sans-serif; transition: 0.2s;
        }

        .btn-check {
            background: var(--success); color: white; padding: 12px; font-size: 1.1rem;
            box-shadow: 0 4px 0 #16a34a; align-self: center; width: 80%;
        }
        .btn-check:hover { filter: brightness(1.1); transform: scale(1.02); }
        .btn-check:active { transform: translateY(3px); box-shadow: 0 1px 0 #16a34a; }

        .btn-help {
            background: #e2e8f0; color: #475569; padding: 6px 15px; font-size: 0.8rem;
            width: fit-content; align-self: center;
        }
        .btn-help.active { background: var(--min-color); color: white; }

        .feedback { margin-top: 10px; font-weight: 700; min-height: 22px; }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            75% { transform: translateX(5px); }
        }
        .wrong { animation: shake 0.4s; border-color: #ef4444 !important; }

        footer { margin-top: 20px; font-size: 0.75rem; color: #94a3b8; }
    </style>
</head>
<body>

<div class="container" id="mainContainer">
    <h1>Vamos aprender a Hora!</h1>

    <div class="info-bar">
        <span class="info-h">ðŸ”µ Ponteiro pequeno: HORAS</span>
        <span class="info-m">ðŸ’— Ponteiro grande: MINUTOS</span>
    </div>

    <div class="target-box">
        <div class="target-label">Ajuste o relÃ³gio para:</div>
        <div class="target-time" id="targetTime">--:--</div>
    </div>

    <div class="clock" id="clock">
        <div class="center"></div>
        <div id="hourHand" class="hand hour-hand"></div>
        <div id="minHand" class="hand min-hand"></div>
    </div>

    <div class="controls">
        <button class="btn-check" onclick="verifyAnswer()">VERIFICAR RESPOSTA</button>
        <button class="btn-help" id="helpToggle" onclick="toggleHelp()">Ativar Ajuda</button>
    </div>

    <div id="feedback" class="feedback"></div>
    
    <footer>Criado por Fabiano Ferreira</footer>
</div>

<script>
    let hRot = 0, mRot = 0, targetH, targetM;
    const clock = document.getElementById('clock');
    
    // Gerar nÃºmeros e ajuda
    for (let i = 1; i <= 12; i++) {
        const rad = (i * 30 - 90) * Math.PI / 180;
        const num = document.createElement('div');
        num.className = 'number';
        num.innerText = i;
        num.style.left = `${115 + 100 * Math.cos(rad)}px`;
        num.style.top = `${115 + 100 * Math.sin(rad)}px`;
        clock.appendChild(num);

        const help = document.createElement('div');
        help.className = 'min-help';
        help.innerText = (i * 5 === 60 ? "00" : i * 5);
        help.style.left = `${122 + 75 * Math.cos(rad)}px`;
        help.style.top = `${122 + 75 * Math.sin(rad)}px`;
        clock.appendChild(help);
    }

    function toggleHelp() {
        const container = document.getElementById('mainContainer');
        const btn = document.getElementById('helpToggle');
        const isActive = container.classList.toggle('show-help');
        btn.innerText = isActive ? "Desativar Ajuda" : "Ativar Ajuda";
        btn.classList.toggle('active', isActive);
    }

    function setupDraggable(element, isHour) {
        let isDragging = false;

        const handleStart = (e) => {
            isDragging = true;
            e.preventDefault();
        };

        const handleMove = (e) => {
            if (!isDragging) return;
            const rect = clock.getBoundingClientRect();
            const cx = rect.left + rect.width / 2;
            const cy = rect.top + rect.height / 2;
            const clientX = e.touches ? e.touches[0].clientX : e.clientX;
            const clientY = e.touches ? e.touches[0].clientY : e.clientY;

            let deg = Math.atan2(clientY - cy, clientX - cx) * 180 / Math.PI + 90;
            if (deg < 0) deg += 360;

            const snap = isHour ? 30 : 6;
            const snapped = Math.round(deg / snap) * snap;

            element.style.transform = `translateX(-50%) rotate(${snapped}deg)`;
            if (isHour) hRot = snapped; else mRot = snapped;
        };

        const handleEnd = () => isDragging = false;

        element.addEventListener('mousedown', handleStart);
        element.addEventListener('touchstart', handleStart);
        window.addEventListener('mousemove', handleMove);
        window.addEventListener('touchmove', handleMove);
        window.addEventListener('mouseup', handleEnd);
        window.addEventListener('touchend', handleEnd);
    }

    setupDraggable(document.getElementById('hourHand'), true);
    setupDraggable(document.getElementById('minHand'), false);

    function verifyAnswer() {
        const container = document.getElementById('mainContainer');
        let curH = (Math.round(hRot / 30) % 12) || 12;
        let curM = (Math.round(mRot / 6) % 60);

        if (curH === targetH && curM === targetM) {
            document.getElementById('feedback').innerText = "VOCÃŠ Ã‰ UM GÃŠNIO! ðŸŒŸ";
            document.getElementById('feedback').style.color = "#22c55e";
            confetti({ particleCount: 200, spread: 80, origin: { y: 0.7 } });
            setTimeout(newChallenge, 4000);
        } else {
            container.classList.add('wrong');
            document.getElementById('feedback').innerText = "Quase lÃ¡, tente outra vez!";
            document.getElementById('feedback').style.color = "#ef4444";
            setTimeout(() => container.classList.remove('wrong'), 500);
        }
    }

    function newChallenge() {
        targetH = Math.floor(Math.random() * 12) || 12;
        targetM = [0, 15, 30, 45, 10, 50][Math.floor(Math.random() * 6)];
        document.getElementById('targetTime').innerText = 
            `${targetH.toString().padStart(2,'0')}:${targetM.toString().padStart(2,'0')}`;
        document.getElementById('feedback').innerText = "";
    }

    newChallenge();
</script>
</body>
</html>